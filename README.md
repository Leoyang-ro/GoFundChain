# SensorCLI - è·¨å¹³å°ä¼ æ„Ÿå™¨è°ƒè¯•å¥—ä»¶

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

SensorCLI æ˜¯ä¸€ä¸ªä¸“ä¸ºå·¥ç¨‹å¸ˆå’Œå¼€å‘è€…è®¾è®¡çš„è·¨å¹³å°ä¼ æ„Ÿå™¨è°ƒè¯•å·¥å…·ï¼Œæ”¯æŒ I2Cã€SPIã€UART ç­‰å¤šç§é€šä¿¡åè®®ã€‚

### ğŸ¯ æŠ€æœ¯æ¶æ„

```sh
ç”¨ C å†™æ ¸å¿ƒé©±åŠ¨ï¼ˆå¦‚ I2C/SPI é€šä¿¡ï¼‰
Go å®ç° CLI è°ƒè¯•å·¥å…· & åç«¯æœåŠ¡
Python åš GUI + æ•°æ®å¯è§†åŒ–ï¼ˆæ”¯æŒ JSON/CSV å¯¼å‡ºï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd sensorcli-ro

# ç¼–è¯‘
go build -o sensorcli

# è¿è¡Œ
./sensorcli --help
```

### åŸºæœ¬ä½¿ç”¨

#### æ‰«æI2Cè®¾å¤‡
```bash
sensorcli scan --bus 1
```

#### è¯»å–è®¾å¤‡å¯„å­˜å™¨
```bash
# è¯»å–å•ä¸ªå¯„å­˜å™¨
sensorcli read --addr 0x48 --reg 0x01 --bus 1

# è¯»å–å¤šä¸ªå­—èŠ‚
sensorcli read --addr 0x48 --reg 0x01 --count 4 --bus 1
```

#### å†™å…¥è®¾å¤‡å¯„å­˜å™¨
```bash
# å†™å…¥å•ä¸ªå€¼
sensorcli write --addr 0x48 --reg 0x02 --value 0x55 --bus 1

# å†™å…¥å¤šä¸ªå­—èŠ‚
sensorcli write --addr 0x48 --reg 0x02 --data 0x55,0x66,0x77 --bus 1
```

#### å¯¼å‡ºå¯„å­˜å™¨æ•°æ®
```bash
# å¯¼å‡ºä¸ºJSONæ ¼å¼
sensorcli dump --addr 0x48 --reg 0x00 --count 16 --format json --output data.json

# å¯¼å‡ºä¸ºCSVæ ¼å¼
sensorcli dump --addr 0x48 --reg 0x00 --count 16 --format csv --output data.csv

# å¯¼å‡ºä¸ºåå…­è¿›åˆ¶æ ¼å¼
sensorcli dump --addr 0x48 --reg 0x00 --count 16 --format hex --output data.txt
```

## ğŸ“¦ åŠŸèƒ½ç‰¹æ€§

| åŠŸèƒ½ | å®ç°æ–¹å¼ | çŠ¶æ€ |
|------|----------|------|
| å‘½ä»¤è§£æ | `cobra` æ¡†æ¶ | âœ… å·²å®Œæˆ |
| å‚æ•°å¤„ç† | `pflag` + cobra | âœ… å·²å®Œæˆ |
| I2C è¯»å– | è·¨å¹³å° I2C æ¥å£ | âœ… å·²å®Œæˆ |
| I2C å†™å…¥ | è·¨å¹³å° I2C æ¥å£ | âœ… å·²å®Œæˆ |
| è®¾å¤‡æ‰«æ | è‡ªåŠ¨æ£€æµ‹ I2C è®¾å¤‡ | âœ… å·²å®Œæˆ |
| æ•°æ®å¯¼å‡º | JSON/CSV/HEX æ ¼å¼ | âœ… å·²å®Œæˆ |
| æ¨¡æ‹Ÿæ¨¡å¼ | Windows å¼€å‘ç¯å¢ƒæ”¯æŒ | âœ… å·²å®Œæˆ |

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
sensorcli/
â”œâ”€â”€ cmd/
â”‚   â”œâ”€â”€ root.go        # ä¸»å‘½ä»¤å®šä¹‰
â”‚   â”œâ”€â”€ read.go        # I2C è¯»å–å‘½ä»¤
â”‚   â”œâ”€â”€ write.go       # I2C å†™å…¥å‘½ä»¤
â”‚   â”œâ”€â”€ scan.go        # I2C è®¾å¤‡æ‰«æ
â”‚   â””â”€â”€ dump.go        # æ•°æ®å¯¼å‡ºå‘½ä»¤
â”œâ”€â”€ i2c/
â”‚   â”œâ”€â”€ interface.go   # I2C è®¾å¤‡æ¥å£å®šä¹‰
â”‚   â””â”€â”€ mock.go        # æ¨¡æ‹Ÿ I2C å®ç°
â”œâ”€â”€ main.go            # ç¨‹åºå…¥å£
â”œâ”€â”€ go.mod             # Go æ¨¡å—ä¾èµ–
â””â”€â”€ README.md          # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”§ å¼€å‘ç¯å¢ƒ

### ç³»ç»Ÿè¦æ±‚
- Go 1.24.2 æˆ–æ›´é«˜ç‰ˆæœ¬
- Windows/Linux/macOS æ”¯æŒ

### ä¾èµ–ç®¡ç†
```bash
# å®‰è£…ä¾èµ–
go mod tidy

# è¿è¡Œæµ‹è¯•
go test ./...
```

## ğŸ“ å‘½ä»¤å‚è€ƒ

### å…¨å±€é€‰é¡¹
- `--help, -h`: æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
- `--version`: æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯

### read å‘½ä»¤
è¯»å– I2C è®¾å¤‡å¯„å­˜å™¨å€¼

**é€‰é¡¹:**
- `--addr, -a`: I2C è®¾å¤‡åœ°å€ (å¿…éœ€)
- `--reg, -r`: å¯„å­˜å™¨åœ°å€ (å¿…éœ€)
- `--bus, -b`: I2C æ€»çº¿å· (é»˜è®¤: 1)
- `--count, -c`: è¯»å–å­—èŠ‚æ•° (é»˜è®¤: 1)

**ç¤ºä¾‹:**
```bash
sensorcli read --addr 0x48 --reg 0x01 --bus 1
sensorcli read --addr 0x48 --reg 0x01 --count 4 --bus 1
```

### write å‘½ä»¤
å†™å…¥æ•°æ®åˆ° I2C è®¾å¤‡å¯„å­˜å™¨

**é€‰é¡¹:**
- `--addr, -a`: I2C è®¾å¤‡åœ°å€ (å¿…éœ€)
- `--reg, -r`: å¯„å­˜å™¨åœ°å€ (å¿…éœ€)
- `--value, -v`: å†™å…¥å€¼ (åå…­è¿›åˆ¶)
- `--data, -d`: å†™å…¥çš„å­—èŠ‚æ•°æ® (é€—å·åˆ†éš”çš„åå…­è¿›åˆ¶å€¼)
- `--bus, -b`: I2C æ€»çº¿å· (é»˜è®¤: 1)

**ç¤ºä¾‹:**
```bash
sensorcli write --addr 0x48 --reg 0x02 --value 0x55 --bus 1
sensorcli write --addr 0x48 --reg 0x02 --data 0x55,0x66,0x77 --bus 1
```

### scan å‘½ä»¤
æ‰«æ I2C æ€»çº¿ä¸Šçš„è®¾å¤‡

**é€‰é¡¹:**
- `--bus, -b`: I2C æ€»çº¿å· (é»˜è®¤: 1)

**ç¤ºä¾‹:**
```bash
sensorcli scan --bus 1
```

### dump å‘½ä»¤
å¯¼å‡º I2C è®¾å¤‡å¯„å­˜å™¨æ•°æ®

**é€‰é¡¹:**
- `--addr, -a`: I2C è®¾å¤‡åœ°å€ (å¿…éœ€)
- `--reg, -r`: èµ·å§‹å¯„å­˜å™¨åœ°å€ (å¿…éœ€)
- `--count, -c`: è¯»å–å­—èŠ‚æ•° (é»˜è®¤: 16)
- `--format, -f`: è¾“å‡ºæ ¼å¼ (json, csv, hex) (é»˜è®¤: json)
- `--output, -o`: è¾“å‡ºæ–‡ä»¶è·¯å¾„
- `--bus, -b`: I2C æ€»çº¿å· (é»˜è®¤: 1)

**ç¤ºä¾‹:**
```bash
sensorcli dump --addr 0x48 --reg 0x00 --count 16 --format json --output data.json
sensorcli dump --addr 0x48 --reg 0x00 --count 16 --format csv --output data.csv
```

## ğŸ”® æœªæ¥è®¡åˆ’

- [ ] SPI é€šä¿¡æ”¯æŒ
- [ ] UART é€šä¿¡æ”¯æŒ
- [ ] å®æ—¶æ•°æ®ç›‘æ§
- [ ] GUI ç•Œé¢å¼€å‘
- [ ] æ›´å¤šä¼ æ„Ÿå™¨é©±åŠ¨
- [ ] è‡ªåŠ¨åŒ–æµ‹è¯•å¥—ä»¶

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚
